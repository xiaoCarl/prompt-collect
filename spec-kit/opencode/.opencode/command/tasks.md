---
description: 基于可用设计工件为功能生成可操作的、依赖排序的tasks.md。
---

给定作为参数提供的上下文，执行以下操作：

1. 从仓库根目录运行 `.specify/scripts/bash/check-task-prerequisites.sh --json` 并解析FEATURE_DIR和AVAILABLE_DOCS列表。所有路径必须是绝对路径。
2. 加载和分析可用的设计文档：
   - 始终读取plan.md以获取技术栈和库
   - 如果存在: 读取data-model.md以获取实体
   - 如果存在: 读取contracts/以获取API端点
   - 如果存在: 读取research.md以获取技术决策
   - 如果存在: 读取quickstart.md以获取测试场景

   注意：并非所有项目都有所有文档。例如：
   - CLI工具可能没有contracts/
   - 简单库可能不需要data-model.md
   - 基于可用内容生成任务

3. 按照模板生成任务：
   - 使用 `.specify/templates/tasks-template.md` 作为基础
   - 用基于以下内容的实际任务替换示例任务：
     * **设置任务**: 项目初始化, 依赖, 代码检查
     * **测试任务 [P]**: 每个契约一个, 每个集成场景一个
     * **核心任务**: 每个实体一个, 服务, CLI命令, 端点
     * **集成任务**: 数据库连接, 中间件, 日志
     * **优化任务 [P]**: 单元测试, 性能, 文档

4. 任务生成规则：
   - 每个契约文件 → 标记为[P]的契约测试任务
   - 数据模型中的每个实体 → 标记为[P]的模型创建任务
   - 每个端点 → 实施任务 (如果共享文件则不并行)
   - 每个用户故事 → 标记为[P]的集成测试
   - 不同文件 = 可以并行 [P]
   - 相同文件 = 顺序执行 (无 [P])

5. 按依赖关系排序任务：
   - 设置先于一切
   - 测试先于实施 (TDD)
   - 模型先于服务
   - 服务先于端点
   - 核心先于集成
   - 一切先于优化

6. 包含并行执行示例：
   - 分组可以一起运行的[P]任务
   - 显示实际的Task智能体命令

7. 创建FEATURE_DIR/tasks.md，包含：
   - 来自实施计划的正确功能名称
   - 编号任务 (T001, T002, 等)
   - 每个任务的清晰文件路径
   - 依赖关系说明
   - 并行执行指导

任务生成的上下文: $ARGUMENTS

tasks.md应该是立即可执行的 - 每个任务必须足够具体，以便LLM可以在没有额外上下文的情况下完成它。
